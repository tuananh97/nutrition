<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√°o c√°o Ph√¢n t√≠ch Dinh d∆∞·ª°ng</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f4ff 0%, #e8f0ff 100%);
            color: #333;
            line-height: 1.6;
        }

        /* Header */
        header {
            background: white;
            border-bottom: 1px solid #e0e0e0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 24px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 8px;
        }

        .header-icon {
            font-size: 32px;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .header-subtitle {
            color: #666;
            font-size: 14px;
            margin-top: 4px;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 32px 20px;
        }

        /* Patient Info Cards */
        .patient-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .info-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4080FF;
        }

        .info-card.warning {
            border-left-color: #FF9A2E;
        }

        .info-card.success {
            border-left-color: #23C343;
        }

        .info-label {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .info-value {
            font-size: 28px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .info-subtext {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
        }

        /* Alert Box */
        .alert {
            background: #fff5f0;
            border-left: 4px solid #FF9A2E;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 32px;
        }

        .alert-title {
            font-weight: 700;
            color: #cc6600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .alert-content {
            color: #995500;
            font-size: 14px;
            line-height: 1.8;
        }

        .alert-content p {
            margin-bottom: 8px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            margin-bottom: -2px;
        }

        .tab-button:hover {
            color: #4080FF;
        }

        .tab-button.active {
            color: #4080FF;
            border-bottom-color: #4080FF;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .chart-card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 8px;
        }

        .chart-subtitle {
            font-size: 12px;
            color: #999;
            margin-bottom: 16px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 16px;
        }

        /* Macro Cards */
        .macro-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .macro-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .macro-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .macro-icon {
            font-size: 20px;
        }

        .macro-name {
            font-weight: 600;
            color: #1a1a1a;
        }

        .macro-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .macro-label {
            color: #666;
        }

        .macro-value {
            font-weight: 600;
            color: #1a1a1a;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            background: #4080FF;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }

        /* Ratio Analysis */
        .ratio-analysis {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 32px;
        }

        .ratio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .ratio-item {
            text-align: center;
        }

        .ratio-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .ratio-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .ratio-target {
            font-size: 12px;
            color: #999;
        }

        /* Details Section */
        .details-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .detail-value {
            color: #666;
            font-size: 14px;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }

        .status-success {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-warning {
            background: #fff3e0;
            color: #e65100;
        }

        /* Recommendations */
        .recommendation {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
            border-left: 4px solid #4080FF;
        }

        .recommendation.warning {
            border-left-color: #FF9A2E;
        }

        .recommendation.success {
            border-left-color: #23C343;
        }

        .rec-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 12px;
        }

        .rec-content {
            color: #666;
            font-size: 14px;
            line-height: 1.8;
        }

        .rec-list {
            list-style: none;
            padding-left: 0;
            margin-top: 12px;
        }

        .rec-list li {
            padding-left: 24px;
            position: relative;
            margin-bottom: 8px;
        }

        .rec-list li:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #4080FF;
            font-weight: bold;
        }

        /* Micronutrient Table */
        .micro-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .micro-table th {
            background: #f5f5f5;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
            color: #666;
            border-bottom: 2px solid #e0e0e0;
        }

        .micro-table td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
        }

        .micro-table tr:hover {
            background: #f9f9f9;
        }

        /* Footer */
        footer {
            background: #1a1a1a;
            color: white;
            padding: 32px 20px;
            text-align: center;
            margin-top: 48px;
        }

        .footer-text {
            color: #999;
            font-size: 12px;
            line-height: 1.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .patient-info {
                grid-template-columns: repeat(2, 1fr);
            }

            .macro-cards {
                grid-template-columns: 1fr;
            }

            .ratio-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 20px;
            }

            .tabs {
                gap: 0;
            }

            .tab-button {
                flex: 1;
                padding: 10px 12px;
                font-size: 12px;
            }
        }

        /* Color Scheme */
        .color-blue { color: #4080FF; }
        .color-cyan { color: #57A9FB; }
        .color-teal { color: #37D4CF; }
        .color-green { color: #23C343; }
        .color-yellow { color: #FBE842; }
        .color-orange { color: #FF9A2E; }
        .color-gray { color: #A9AEB8; }

        .bg-blue { background: #4080FF; }
        .bg-cyan { background: #57A9FB; }
        .bg-teal { background: #37D4CF; }
        .bg-green { background: #23C343; }
        .bg-yellow { background: #FBE842; }
        .bg-orange { background: #FF9A2E; }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="header-content">
                <div class="header-icon">‚ù§Ô∏è</div>
                <div>
                    <h1>B√°o c√°o Ph√¢n t√≠ch Dinh d∆∞·ª°ng</h1>
                    <p class="header-subtitle">ƒê√°nh gi√° to√†n di·ªán t√¨nh tr·∫°ng dinh d∆∞·ª°ng v√† khuy·∫øn ngh·ªã c·∫£i thi·ªán</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Patient Information -->
        <div class="patient-info">
            <div class="info-card">
                <div class="info-label">Tu·ªïi</div>
                <div class="info-value">28</div>
                <div class="info-subtext">Nam</div>
            </div>
            <div class="info-card">
                <div class="info-label">C√¢n n·∫∑ng</div>
                <div class="info-value">45</div>
                <div class="info-subtext">kg</div>
            </div>
            <div class="info-card">
                <div class="info-label">Chi·ªÅu cao</div>
                <div class="info-value">165</div>
                <div class="info-subtext">cm</div>
            </div>
            <div class="info-card warning">
                <div class="info-label">BMI</div>
                <div class="info-value color-orange">16.53</div>
                <div class="info-subtext">Suy dinh d∆∞·ª°ng</div>
            </div>
        </div>

        <!-- Assessment Alert -->
        <div class="alert">
            <div class="alert-title">‚ö†Ô∏è ƒê√°nh gi√° T√¨nh tr·∫°ng Dinh d∆∞·ª°ng</div>
            <div class="alert-content">
                <p><strong>T√¨nh tr·∫°ng:</strong> G·∫ßy ƒë·ªô II (Suy dinh d∆∞·ª°ng v·ª´a)</p>
                <p><strong>C√¢n n·∫∑ng l√Ω t∆∞·ªüng:</strong> 61.3 kg | <strong>Hi·ªán t·∫°i:</strong> 45 kg</p>
                <p><strong>Nguy c∆°:</strong> M·ªát m·ªèi, t√°o b√≥n, gi·∫£m mi·ªÖn d·ªãch (ng·∫Øn h·∫°n); Lo√£ng x∆∞∆°ng, thi·∫øu m√°u, s·ª•t c√¢n (d√†i h·∫°n)</p>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('overview')">üìä T·ªïng quan</button>
            <button class="tab-button" onclick="switchTab('macros')">üçΩÔ∏è ƒê·∫°m & NƒÉng l∆∞·ª£ng</button>
            <button class="tab-button" onclick="switchTab('details')">üìà Chi ti·∫øt</button>
            <button class="tab-button" onclick="switchTab('recommendations')">üí° Khuy·∫øn ngh·ªã</button>
        </div>

        <!-- Tab: Overview -->
        <div id="overview" class="tab-content active">
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-title">So s√°nh L∆∞·ª£ng Dinh d∆∞·ª°ng</div>
                    <div class="chart-subtitle">Trung b√¨nh ti√™u th·ª• vs. M·ª•c ti√™u</div>
                    <div class="chart-container">
                        <canvas id="macroComparisonChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <div class="chart-title">T·ª∑ l·ªá NƒÉng l∆∞·ª£ng</div>
                    <div class="chart-subtitle">T·ª´ c√°c nh√≥m dinh d∆∞·ª°ng</div>
                    <div class="chart-container">
                        <canvas id="macroRatioChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-title">Xu h∆∞·ªõng NƒÉng l∆∞·ª£ng H√†ng ng√†y</div>
                <div class="chart-subtitle">Theo d√µi ti√™u th·ª• nƒÉng l∆∞·ª£ng trong th√°ng 11</div>
                <div class="chart-container" style="height: 350px;">
                    <canvas id="energyTrendChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Tab: Macros -->
        <div id="macros" class="tab-content">
            <div class="macro-cards">
                <div class="macro-card">
                    <div class="macro-header">
                        <div class="macro-icon">‚ö°</div>
                        <div class="macro-name">NƒÉng l∆∞·ª£ng</div>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">Trung b√¨nh:</span>
                        <span class="macro-value">1885 kcal</span>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">M·ª•c ti√™u:</span>
                        <span class="macro-value color-blue">1700 kcal</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill bg-blue" style="width: 100%;"></div>
                    </div>
                    <div class="progress-text">110.9% c·ªßa m·ª•c ti√™u</div>
                </div>

                <div class="macro-card">
                    <div class="macro-header">
                        <div class="macro-icon">üåø</div>
                        <div class="macro-name">Protein</div>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">Trung b√¨nh:</span>
                        <span class="macro-value">96.9 g</span>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">M·ª•c ti√™u:</span>
                        <span class="macro-value color-green">75 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill bg-green" style="width: 100%;"></div>
                    </div>
                    <div class="progress-text">129.2% c·ªßa m·ª•c ti√™u</div>
                </div>

                <div class="macro-card">
                    <div class="macro-header">
                        <div class="macro-icon">üßà</div>
                        <div class="macro-name">Ch·∫•t b√©o</div>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">Trung b√¨nh:</span>
                        <span class="macro-value">83.2 g</span>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">M·ª•c ti√™u:</span>
                        <span class="macro-value color-orange">65 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill bg-orange" style="width: 100%;"></div>
                    </div>
                    <div class="progress-text">128.0% c·ªßa m·ª•c ti√™u</div>
                </div>

                <div class="macro-card">
                    <div class="macro-header">
                        <div class="macro-icon">üçö</div>
                        <div class="macro-name">Carbohydrate</div>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">Trung b√¨nh:</span>
                        <span class="macro-value">206.9 g</span>
                    </div>
                    <div class="macro-row">
                        <span class="macro-label">M·ª•c ti√™u:</span>
                        <span class="macro-value color-teal">190 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill bg-teal" style="width: 100%;"></div>
                    </div>
                    <div class="progress-text">108.9% c·ªßa m·ª•c ti√™u</div>
                </div>
            </div>

            <div class="ratio-analysis">
                <div class="chart-title">Ph√¢n t√≠ch T·ª∑ l·ªá Macro</div>
                <div class="chart-subtitle">So s√°nh t·ª∑ l·ªá nƒÉng l∆∞·ª£ng t·ª´ c√°c nh√≥m dinh d∆∞·ª°ng</div>
                
                <div class="ratio-grid">
                    <div class="ratio-item">
                        <div class="ratio-value color-teal">42.1%</div>
                        <div class="ratio-label">Carbohydrate</div>
                        <div class="ratio-target">M·ª•c ti√™u: 45%</div>
                    </div>
                    <div class="ratio-item">
                        <div class="ratio-value color-orange">38.1%</div>
                        <div class="ratio-label">Ch·∫•t b√©o</div>
                        <div class="ratio-target">M·ª•c ti√™u: 35%</div>
                    </div>
                    <div class="ratio-item">
                        <div class="ratio-value color-green">19.7%</div>
                        <div class="ratio-label">Protein</div>
                        <div class="ratio-target">M·ª•c ti√™u: 20%</div>
                    </div>
                </div>

                <div class="alert" style="margin-top: 20px; background: #e3f2fd; border-left-color: #4080FF;">
                    <div class="alert-title" style="color: #1565c0;">‚ÑπÔ∏è Nh·∫≠n x√©t</div>
                    <div class="alert-content" style="color: #0d47a1;">
                        T·ª∑ l·ªá hi·ªán t·∫°i g·∫ßn v·ªõi m·ª•c ti√™u. Ch·∫•t b√©o h∆°i cao (38.1% vs 35%), carbohydrate h∆°i th·∫•p (42.1% vs 45%).
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Details -->
        <div id="details" class="tab-content">
            <div class="chart-card">
                <div class="chart-title">T√¨nh tr·∫°ng Vi ch·∫•t Dinh d∆∞·ª°ng</div>
                <div class="chart-subtitle">Trung b√¨nh ti√™u th·ª• so v·ªõi m·ª©c tham chi·∫øu</div>
                <div class="chart-container" style="height: 400px;">
                    <canvas id="micronutrientChart"></canvas>
                </div>
            </div>

            <div class="chart-card" style="margin-top: 24px;">
                <div class="chart-title">Ph√¢n t√≠ch Chi ti·∫øt Ch·∫•t b√©o v√† ƒê∆∞·ªùng</div>
                <div class="chart-subtitle">Ch·∫•t b√©o b√£o h√≤a v√† ƒë∆∞·ªùng ƒë∆°n</div>
                <div class="chart-container">
                    <canvas id="fatCarbChart"></canvas>
                </div>
            </div>

            <div class="details-section" style="margin-top: 24px;">
                <div class="section-title">üìã Ph√¢n t√≠ch Ch·∫•t b√©o Chi ti·∫øt</div>
                <div class="detail-item">
                    <div class="detail-label">Ch·∫•t b√©o b√£o h√≤a (SFA)</div>
                    <div class="detail-value">
                        Trung b√¨nh: <strong>35.6 g/ng√†y</strong> | M·ª•c ti√™u: <strong>18.9 g/ng√†y</strong>
                        <span class="status-badge status-warning">V∆∞·ª£t</span>
                    </div>
                    <p style="margin-top: 8px; color: #999; font-size: 12px;">Khuy·∫øn c√°o: Gi·∫£m ch·∫•t b√©o b√£o h√≤a xu·ªëng d∆∞·ªõi 10% t·ªïng nƒÉng l∆∞·ª£ng ƒë·ªÉ gi·∫£m nguy c∆° b·ªánh tim m·∫°ch.</p>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Ch·∫•t b√©o kh√¥ng b√£o h√≤a</div>
                    <div class="detail-value">
                        Trung b√¨nh: <strong>47.6 g/ng√†y</strong>
                    </div>
                    <p style="margin-top: 8px; color: #999; font-size: 12px;">T·ªët cho s·ª©c kh·ªèe tim m·∫°ch. H√£y ti·∫øp t·ª•c duy tr√¨ m·ª©c ƒë·ªô n√†y.</p>
                </div>
            </div>

            <div class="details-section">
                <div class="section-title">üìä Ph√¢n t√≠ch Carbohydrate Chi ti·∫øt</div>
                <div class="detail-item">
                    <div class="detail-label">ƒê∆∞·ªùng ƒë∆°n (Simple Sugars)</div>
                    <div class="detail-value">
                        Trung b√¨nh: <strong>57.4 g/ng√†y</strong> | M·ª•c ti√™u: <strong>42.5 g/ng√†y</strong>
                        <span class="status-badge status-warning">V∆∞·ª£t</span>
                    </div>
                    <p style="margin-top: 8px; color: #999; font-size: 12px;">Khuy·∫øn c√°o: WHO khuy·∫øn c√°o gi·ªõi h·∫°n ƒë∆∞·ªùng t·ª± do d∆∞·ªõi 10% t·ªïng nƒÉng l∆∞·ª£ng ƒë·ªÉ ngƒÉn ng·ª´a b√©o ph√¨ v√† s√¢u rƒÉng.</p>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Tinh b·ªôt (Complex Carbs)</div>
                    <div class="detail-value">
                        Trung b√¨nh: <strong>57.7 g/ng√†y</strong>
                    </div>
                    <p style="margin-top: 8px; color: #999; font-size: 12px;">Carbohydrate ph·ª©c h·ª£p cung c·∫•p nƒÉng l∆∞·ª£ng b·ªÅn v·ªØng. M·ª©c ƒë·ªô n√†y l√† t·ªët.</p>
                </div>
            </div>

            <div class="details-section">
                <div class="section-title">üß¨ T√≥m t·∫Øt Vi ch·∫•t Dinh d∆∞·ª°ng</div>
                <table class="micro-table">
                    <thead>
                        <tr>
                            <th>Vi ch·∫•t</th>
                            <th>Trung b√¨nh</th>
                            <th>M·ª•c ti√™u</th>
                            <th>Tr·∫°ng th√°i</th>
                        </tr>
                    </thead>
                    <tbody id="micronutrientTable">
                        <!-- Filled by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tab: Recommendations -->
        <div id="recommendations" class="tab-content">
            <div class="recommendation">
                <div class="rec-title">1Ô∏è‚É£ ƒêi·ªÅu ch·ªânh NƒÉng l∆∞·ª£ng</div>
                <div class="rec-content">
                    <p>B·∫°n ƒëang ti√™u th·ª• <strong>1885 kcal/ng√†y</strong>, cao h∆°n m·ª•c ti√™u <strong>1700 kcal/ng√†y</strong> kho·∫£ng <strong>10.9%</strong>.</p>
                    <ul class="rec-list">
                        <li>Gi·∫£m k√≠ch th∆∞·ªõc ph·∫ßn ƒÉn ho·∫∑c t·∫ßn su·∫•t ƒÉn nh·∫π</li>
                        <li>Thay th·∫ø th·ª©c ƒÉn cao calo b·∫±ng th·ª±c ph·∫©m c√≥ calo th·∫•p h∆°n</li>
                        <li>T·∫≠p trung v√†o rau xanh, tr√°i c√¢y, v√† protein n·∫°c</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation success">
                <div class="rec-title">2Ô∏è‚É£ Duy tr√¨ Protein</div>
                <div class="rec-content">
                    <p>B·∫°n ƒëang ti√™u th·ª• <strong>96.9 g/ng√†y</strong>, cao h∆°n m·ª•c ti√™u <strong>75 g/ng√†y</strong>. M·ª©c ƒë·ªô n√†y l√† t·ªët.</p>
                    <ul class="rec-list">
                        <li>Duy tr√¨ m·ª©c protein hi·ªán t·∫°i</li>
                        <li>∆Øu ti√™n protein t·ª´ c√°, g√†, tr·ª©ng, v√† s·ªØa</li>
                        <li>Tr√°nh th·ªãt ƒë·ªè qu√° nhi·ªÅu (ch·ª©a ch·∫•t b√©o b√£o h√≤a)</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation warning">
                <div class="rec-title">3Ô∏è‚É£ Gi·∫£m Ch·∫•t b√©o B√£o h√≤a</div>
                <div class="rec-content">
                    <p>Ch·∫•t b√©o b√£o h√≤a ƒëang <strong>V∆∞·ª£t</strong> ng∆∞·ª°ng khuy·∫øn c√°o. Gi·∫£m t·ª´ <strong>35.6 g</strong> xu·ªëng d∆∞·ªõi <strong>18.9 g/ng√†y</strong>.</p>
                    <ul class="rec-list">
                        <li>Gi·∫£m d·∫ßu ƒÉn, b∆°, v√† s·ªØa b√©o</li>
                        <li>TƒÉng d·∫ßu √¥ liu, d·∫ßu c√°, v√† c√°c lo·∫°i h·∫°t</li>
                        <li>Ch·ªçn s·ªØa v√† s·∫£n ph·∫©m s·ªØa √≠t b√©o</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation warning">
                <div class="rec-title">4Ô∏è‚É£ Gi·∫£m ƒê∆∞·ªùng ƒê∆°n</div>
                <div class="rec-content">
                    <p>ƒê∆∞·ªùng ƒë∆°n ƒëang <strong>V∆∞·ª£t</strong> m·ª•c ti√™u. Gi·∫£m t·ª´ <strong>57.4 g</strong> xu·ªëng d∆∞·ªõi <strong>42.5 g/ng√†y</strong>.</p>
                    <ul class="rec-list">
                        <li>Tr√°nh n∆∞·ªõc ng·ªçt, k·∫πo, v√† b√°nh ng·ªçt</li>
                        <li>Ch·ªçn tr√°i c√¢y t∆∞∆°i thay v√¨ n∆∞·ªõc tr√°i c√¢y</li>
                        <li>TƒÉng carbohydrate ph·ª©c h·ª£p t·ª´ ng≈© c·ªëc nguy√™n h·∫°t</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation success">
                <div class="rec-title">5Ô∏è‚É£ Duy tr√¨ X∆°</div>
                <div class="rec-content">
                    <p>B·∫°n ƒëang ti√™u th·ª• <strong>32.4 g/ng√†y</strong>, cao h∆°n m·ª•c ti√™u <strong>25 g/ng√†y</strong>. M·ª©c ƒë·ªô n√†y l√† t·ªët.</p>
                    <ul class="rec-list">
                        <li>Duy tr√¨ m·ª©c x∆° hi·ªán t·∫°i</li>
                        <li>TƒÉng d·∫ßn n·∫øu c√≥ v·∫•n ƒë·ªÅ ti√™u h√≥a</li>
                        <li>U·ªëng ƒë·ªß n∆∞·ªõc (√≠t nh·∫•t 2 l√≠t/ng√†y)</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation warning">
                <div class="rec-title">6Ô∏è‚É£ B·ªï sung Vi ch·∫•t</div>
                <div class="rec-content">
                    <p>Vitamin D ƒëang thi·∫øu. Khuy·∫øn c√°o b·ªï sung:</p>
                    <ul class="rec-list">
                        <li><strong>Vitamin D:</strong> TƒÉng th·ª±c ph·∫©m gi√†u vitamin D (c√° b√©o, tr·ª©ng, s·ªØa tƒÉng c∆∞·ªùng) ho·∫∑c b·ªï sung 15-20 ¬µg/ng√†y</li>
                        <li><strong>Vitamin B-complex:</strong> B·ªï sung n·∫øu c·∫£m th·∫•y m·ªát m·ªèi</li>
                        <li><strong>K·∫Ωm (Zinc):</strong> Duy tr√¨ m·ª©c ƒë·ªô hi·ªán t·∫°i (r·∫•t t·ªët)</li>
                    </ul>
                </div>
            </div>

            <div class="recommendation">
                <div class="rec-title">7Ô∏è‚É£ T·ªëi ∆∞u h√≥a Ch·∫ø ƒë·ªô ƒÇn</div>
                <div class="rec-content">
                    <p>Duy tr√¨ 6 b·ªØa/ng√†y nh∆∞ hi·ªán t·∫°i, nh∆∞ng ƒëi·ªÅu ch·ªânh n·ªôi dung:</p>
                    <ul class="rec-list">
                        <li><strong>3 b·ªØa s√∫p xay:</strong> Th√™m rau xanh, gi·∫£m d·∫ßu ƒÉn, th√™m protein (g√†, c√°)</li>
                        <li><strong>2 b·ªØa s·ªØa 230kcal:</strong> Ch·ªçn s·ªØa √≠t b√©o, th√™m ng≈© c·ªëc nguy√™n h·∫°t</li>
                        <li><strong>1 ly n∆∞·ªõc tr√°i c√¢y:</strong> Thay b·∫±ng tr√°i c√¢y t∆∞∆°i ho·∫∑c sinh t·ªë rau xanh</li>
                        <li><strong>1 ly sinh t·ªë:</strong> Th√™m rau xanh, gi·∫£m ƒë∆∞·ªùng, th√™m protein (s·ªØa chua, s·ªØa)</li>
                    </ul>
                </div>
            </div>

            <div class="alert" style="background: #e8f5e9; border-left-color: #23C343;">
                <div class="alert-title" style="color: #2e7d32;">üìà Theo d√µi Ti·∫øn ƒë·ªô</div>
                <div class="alert-content" style="color: #1b5e20;">
                    <p><strong>C√¢n n·∫∑ng m·ª•c ti√™u:</strong> 61.3 kg</p>
                    <p><strong>Chi·∫øn l∆∞·ª£c:</strong> TƒÉng d·∫ßn 0.5-1 kg/tu·∫ßn b·∫±ng c√°ch duy tr√¨ th·ª´a 250-500 kcal/ng√†y so v·ªõi nhu c·∫ßu c∆° b·∫£n.</p>
                    <p><strong>Gi√°m s√°t:</strong> Ki·ªÉm tra c√¢n n·∫∑ng h√†ng tu·∫ßn v√† ƒëi·ªÅu ch·ªânh ch·∫ø ƒë·ªô ƒÉn theo k·∫øt qu·∫£.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-text">
            <p>B√°o c√°o n√†y d·ª±a tr√™n d·ªØ li·ªáu dinh d∆∞·ª°ng t·ª´ th√°ng 11/2025.</p>
            <p>Vui l√≤ng tham kh·∫£o √Ω ki·∫øn b√°c sƒ© ho·∫∑c chuy√™n gia dinh d∆∞·ª°ng tr∆∞·ªõc khi th·ª±c hi·ªán b·∫•t k·ª≥ thay ƒë·ªïi n√†o.</p>
        </div>
    </footer>

    <script>
        // Data
        const analysisData = {
            patient_data: {
                age: 28,
                gender: "male",
                weight_kg: 45,
                height_cm: 165,
                target_kcal: 1700,
                target_protein_g: 75,
                target_fat_g: 65,
                target_carb_g: 190,
                target_fiber_g: 25,
                target_ratio_carb: 0.45,
                target_ratio_fat: 0.35,
                target_ratio_protein: 0.2
            },
            overall_averages: {
                energy_kcal: 1885.05,
                protein_g: 96.86,
                fat_g: 83.21,
                carb_g: 206.87,
                fiber_g: 32.4,
                ratio_protein: 0.1974,
                ratio_carb: 0.4214,
                ratio_fat: 0.3812
            },
            fat_analysis: {
                avg_sfa: 35.62,
                avg_unsaturated: 47.59,
                sfa_target_g: 18.89
            },
            carb_analysis: {
                avg_starch: 57.65,
                avg_sugars: 57.38,
                sugar_target_g: 42.5
            },
            micronutrient_analysis: {
                "Vitamin A (¬µg)": { average_intake: 1318.62, reference: 900, status: "ƒê·ªß" },
                "Vitamin C (mg)": { average_intake: 202.10, reference: 90, status: "ƒê·ªß" },
                "Vitamin D (IU)": { average_intake: 461.49, reference: 600, status: "Thi·∫øu" },
                "Vitamin E (mg)": { average_intake: 15.74, reference: 15, status: "ƒê·ªß" },
                "Vitamin K (¬µg)": { average_intake: 233.82, reference: 120, status: "ƒê·ªß" },
                "Calcium (mg)": { average_intake: 1205.82, reference: 1000, status: "ƒê·ªß" },
                "Iron (mg)": { average_intake: 14.48, reference: 8, status: "ƒê·ªß" },
                "Magnesium (mg)": { average_intake: 496.53, reference: 420, status: "ƒê·ªß" },
                "Zinc (mg)": { average_intake: 13.79, reference: 11, status: "ƒê·ªß" },
                "Potassium (mg)": { average_intake: 4128.33, reference: 3400, status: "ƒê·ªß" },
                "Sodium (mg)": { average_intake: 1595.83, reference: 1500, status: "ƒê·ªß" },
                "Copper (mg)": { average_intake: 2.14, reference: 0.9, status: "ƒê·ªß" },
                "Manganese (mg)": { average_intake: 4.78, reference: 2.3, status: "ƒê·ªß" },
                "Phosphorus (mg)": { average_intake: 1769.73, reference: 700, status: "ƒê·ªß" },
                "Selenium (¬µg)": { average_intake: 99.68, reference: 55, status: "ƒê·ªß" }
            },
            daily_trend_data: [
                { date: "2025-11-01", energy: 1847.1 },
                { date: "2025-11-02", energy: 1749.8 },
                { date: "2025-11-03", energy: 1819.9 },
                { date: "2025-11-04", energy: 1865.5 },
                { date: "2025-11-05", energy: 1927.5 },
                { date: "2025-11-06", energy: 1726.0 },
                { date: "2025-11-07", energy: 1822.0 },
                { date: "2025-11-08", energy: 1897.1 },
                { date: "2025-11-09", energy: 1937.7 },
                { date: "2025-11-10", energy: 1908.4 },
                { date: "2025-11-11", energy: 1896.3 },
                { date: "2025-11-12", energy: 1924.0 },
                { date: "2025-11-13", energy: 1914.1 },
                { date: "2025-11-14", energy: 1955.8 },
                { date: "2025-11-15", energy: 1899.1 },
                { date: "2025-11-16", energy: 1884.7 },
                { date: "2025-11-17", energy: 1789.2 },
                { date: "2025-11-18", energy: 1918.0 },
                { date: "2025-11-19", energy: 1814.8 },
                { date: "2025-11-20", energy: 1867.1 },
                { date: "2025-11-21", energy: 1933.6 },
                { date: "2025-11-22", energy: 1996.7 },
                { date: "2025-11-23", energy: 1964.3 },
                { date: "2025-11-24", energy: 1834.6 },
                { date: "2025-11-25", energy: 1958.3 },
                { date: "2025-11-26", energy: 1905.9 },
                { date: "2025-11-27", energy: 1872.9 },
                { date: "2025-11-28", energy: 1926.6 },
                { date: "2025-11-29", energy: 1919.8 },
                { date: "2025-11-30", energy: 1874.6 }
            ]
        };

        // Chart.js Color Palette
        const chartColors = {
            blue: '#4080FF',
            cyan: '#57A9FB',
            teal: '#37D4CF',
            green: '#23C343',
            yellow: '#FBE842',
            orange: '#FF9A2E',
            gray: '#A9AEB8'
        };

        // Chart instances for later reference
        let charts = {};

        // Initialize Charts
        function initCharts() {
            // Chart 1: Macro Comparison
            const macroCtx = document.getElementById('macroComparisonChart').getContext('2d');
            new Chart(macroCtx, {
                type: 'bar',
                data: {
                    labels: ['NƒÉng l∆∞·ª£ng (kcal)', 'ƒê·∫°m (g)', 'B√©o (g)', 'Carb (g)', 'X∆° (g)'],
                    datasets: [
                        {
                            label: 'Trung b√¨nh',
                            data: [1885.05, 96.86, 83.21, 206.87, 32.4],
                            backgroundColor: chartColors.blue,
                            borderRadius: 4,
                            borderSkipped: false
                        },
                        {
                            label: 'M·ª•c ti√™u',
                            data: [1700, 75, 65, 190, 25],
                            backgroundColor: chartColors.orange,
                            borderRadius: 4,
                            borderSkipped: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { size: 12 },
                                padding: 16
                            }
                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Chart 2: Macro Ratio (Doughnut)
            const ratioCtx = document.getElementById('macroRatioChart').getContext('2d');
            new Chart(ratioCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Carbohydrate', 'Ch·∫•t b√©o', 'Protein'],
                    datasets: [
                        {
                            label: 'T·ª∑ l·ªá trung b√¨nh',
                            data: [42.14, 38.12, 19.74],
                            backgroundColor: [chartColors.teal, chartColors.orange, chartColors.green],
                            borderColor: 'white',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { size: 12 },
                                padding: 16
                            }
                        }
                    }
                }
            });

            // Chart 3: Energy Trend
            const trendCtx = document.getElementById('energyTrendChart').getContext('2d');
            new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: analysisData.daily_trend_data.map(d => d.date.substring(5)),
                    datasets: [
                        {
                            label: 'NƒÉng l∆∞·ª£ng ti√™u th·ª• (kcal)',
                            data: analysisData.daily_trend_data.map(d => d.energy),
                            borderColor: chartColors.blue,
                            backgroundColor: 'rgba(64, 128, 255, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 3,
                            pointBackgroundColor: chartColors.blue,
                            pointBorderColor: 'white',
                            pointBorderWidth: 2
                        },
                        {
                            label: 'M·ª•c ti√™u (1700 kcal)',
                            data: Array(30).fill(1700),
                            borderColor: chartColors.orange,
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { size: 12 },
                                padding: 16
                            }
                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Chart 4: Micronutrient Status
            const microCanvas = document.getElementById('micronutrientChart');
            if (microCanvas) {
                const microCtx = microCanvas.getContext('2d');
                const microLabels = Object.keys(analysisData.micronutrient_analysis);
                const microData = microLabels.map(nutrient => {
                    const intake = analysisData.micronutrient_analysis[nutrient].average_intake;
                    const reference = analysisData.micronutrient_analysis[nutrient].reference;
                    return (intake / reference) * 100;
                });
                const microColors = microData.map(val => val >= 100 ? chartColors.green : chartColors.orange);

                charts.micronutrient = new Chart(microCtx, {
                    type: 'bar',
                data: {
                    labels: microLabels,
                    datasets: [
                        {
                            label: 'Ph·∫ßn trƒÉm m·ª•c ti√™u (%)',
                            data: microData,
                            backgroundColor: microColors,
                            borderRadius: 4,
                            borderSkipped: false
                        }
                    ]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 200,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                                drawBorder: false
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            }

            // Chart 5: Fat & Carb Detail
            const fatCarbCanvas = document.getElementById('fatCarbChart');
            if (fatCarbCanvas) {
                const fatCarbCtx = fatCarbCanvas.getContext('2d');
                charts.fatCarb = new Chart(fatCarbCtx, {
                type: 'bar',
                data: {
                    labels: ['Ch·∫•t b√©o b√£o h√≤a (g)', 'ƒê∆∞·ªùng ƒë∆°n (g)'],
                    datasets: [
                        {
                            label: 'Trung b√¨nh',
                            data: [35.62, 57.38],
                            backgroundColor: chartColors.orange,
                            borderRadius: 4,
                            borderSkipped: false
                        },
                        {
                            label: 'M·ª•c ti√™u/Ng∆∞·ª°ng',
                            data: [18.89, 42.5],
                            backgroundColor: chartColors.teal,
                            borderRadius: 4,
                            borderSkipped: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { size: 12 },
                                padding: 16
                            }
                        },
                        grid: {
                            display: true,
                            drawBorder: false,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)',
                                drawBorder: false
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
            }
        }

        // Fill Micronutrient Table
        function fillMicronutrientTable() {
            const tbody = document.getElementById('micronutrientTable');
            Object.entries(analysisData.micronutrient_analysis).forEach(([nutrient, data]) => {
                const row = document.createElement('tr');
                const statusClass = data.status === 'ƒê·ªß' ? 'status-success' : 'status-warning';
                row.innerHTML = `
                    <td>${nutrient}</td>
                    <td>${data.average_intake.toFixed(1)}</td>
                    <td>${data.reference.toFixed(0)}</td>
                    <td><span class="status-badge ${statusClass}">${data.status}</span></td>
                `;
                tbody.appendChild(row);
            });
        }



        // Tab Switching with Chart Redraw
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            // Remove active from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            // Show selected tab
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            // Add active to clicked button
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Redraw charts based on tab
            setTimeout(() => {
                if (tabName === 'details') {
                    if (charts.micronutrient) {
                        charts.micronutrient.resize();
                        charts.micronutrient.update();
                    }
                    if (charts.fatCarb) {
                        charts.fatCarb.resize();
                        charts.fatCarb.update();
                    }
                } else if (tabName === 'overview') {
                    Object.values(charts).forEach(chart => {
                        if (chart && typeof chart.resize === 'function') {
                            chart.resize();
                            chart.update();
                        }
                    });
                }
            }, 50);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            fillMicronutrientTable();
        });
    </script>
</body>
</html>
